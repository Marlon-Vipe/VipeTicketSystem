@model VipeSystem.Models.Ticket
@{
    ViewBag.Title = "Crear Ticket";
}

<div class="container mt-4">
    <div class="card shadow-sm">
        <div class="card-header bg-primary text-white">
            <h2 class="mb-0">Crear Nuevo Ticket</h2>
        </div>

        <div class="card-body">
            @using (Html.BeginForm())
            {
                @Html.AntiForgeryToken()
                @Html.ValidationSummary(true, "", new { @class = "text-danger" })

                <div class="row">
                    <!-- Columna izquierda -->
                    <div class="col-md-6">
                        <div class="mb-3">
                            @Html.LabelFor(model => model.Title, "Título", new { @class = "form-label fw-bold" })
                            @Html.EditorFor(model => model.Title, new { htmlAttributes = new { @class = "form-control", placeholder = "Ingrese el título del ticket" } })
                            @Html.ValidationMessageFor(model => model.Title, "", new { @class = "text-danger" })
                        </div>

                        <div class="mb-3">
                            @Html.LabelFor(model => model.Description, "Descripción", new { @class = "form-label fw-bold" })
                            @Html.TextAreaFor(model => model.Description, new { @class = "form-control", rows = 5, placeholder = "Describa el problema o solicitud" })
                            @Html.ValidationMessageFor(model => model.Description, "", new { @class = "text-danger" })
                        </div>

                        <div class="mb-3">
                            @Html.LabelFor(model => model.CategoryId, "Categoría", new { @class = "form-label fw-bold" })
                            @Html.DropDownListFor(model => model.CategoryId, (SelectList)ViewBag.Categories, "Seleccione una categoría", new { @class = "form-select" })
                            @Html.ValidationMessageFor(model => model.CategoryId, "", new { @class = "text-danger" })
                        </div>
                    </div>

                    <!-- Columna derecha -->
                    <div class="col-md-6">
                        <div class="mb-3">
                            @Html.LabelFor(model => model.Priority, "Prioridad", new { @class = "form-label fw-bold" })
                            @Html.DropDownListFor(model => model.Priority,
                                new List<SelectListItem>
                                {
                                    new SelectListItem { Text = "Alta", Value = "3" },
                                    new SelectListItem { Text = "Media", Value = "2" },
                                    new SelectListItem { Text = "Baja", Value = "1" }
                                },
                                "Seleccione la prioridad", new { @class = "form-select" })
                            @Html.ValidationMessageFor(model => model.Priority, "", new { @class = "text-danger" })
                        </div>

                        <div class="mb-3">
                            @Html.LabelFor(model => model.Status, "Estado", new { @class = "form-label fw-bold" })
                            @Html.DropDownListFor(model => model.Status,
                                new List<SelectListItem>
                                {
                                    new SelectListItem { Text = "Nuevo", Value = "1" },
                                    new SelectListItem { Text = "En Progreso", Value = "2" },
                                    new SelectListItem { Text = "Pendiente", Value = "3" },
                                    new SelectListItem { Text = "Resuelto", Value = "4" },
                                    new SelectListItem { Text = "Cerrado", Value = "5" }
                                },
                                "Seleccione el estado", new { @class = "form-select" })
                            @Html.ValidationMessageFor(model => model.Status, "", new { @class = "text-danger" })
                        </div>

                        <div class="mb-3">
                            @Html.LabelFor(model => model.CreatedBy, "Usuario Creador", new { @class = "form-label fw-bold" })
                            @Html.DropDownListFor(model => model.CreatedBy, (SelectList)ViewBag.Users, "Seleccione un usuario", new { @class = "form-select" })
                            @Html.ValidationMessageFor(model => model.CreatedBy, "", new { @class = "text-danger" })
                        </div>

                        <div class="mb-3">
                            @Html.LabelFor(model => model.AssignedTo, "Usuario Asignado", new { @class = "form-label fw-bold" })
                            @Html.DropDownListFor(model => model.AssignedTo, (SelectList)ViewBag.Users, "Seleccione un usuario (opcional)", new { @class = "form-select" })
                            @Html.ValidationMessageFor(model => model.AssignedTo, "", new { @class = "text-danger" })
                        </div>
                    </div>
                </div>

                <div class="row mt-4">
                    <div class="col-12">
                        <div class="d-flex justify-content-between">
                            @Html.ActionLink("Volver a la lista", "Index", null, new { @class = "btn btn-secondary" })
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save me-2"></i>Crear Ticket
                            </button>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}